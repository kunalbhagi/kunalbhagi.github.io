<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <title>Metadata Visualization Example 1</title>
    <style>

.node {
    fill: #ccc;
    stroke: #fff;
    stroke-width: 2px;
}

.link {
    stroke: #777;
    stroke-width: 2px;
}

    </style>
</head>
<body>
    <script src='http://d3js.org/d3.v3.min.js'></script>
    <script>
    var width = 1000,
        height = 1000;

    var nodes = [
        { name: "report1", x:  400, y: 400,r:25 },
        { name: "metric1", x: 200, y: 50 ,r:10 },
        { name: "metric2", x: 200, y: 250,r:10 },
        { name: "metric3", x: 200, y: 450,r:10 },
        { name: "report2", x: 400, y: 600,r:25 },
        { name: "metric4", x: 700, y: 50,r:10 },
        { name: "metric5", x: 700, y: 250,r:10 },
        { name: "metric6", x: 700, y: 450,r:10 },
        { name: "metric7", x: 700, y: 650,r:10 }
        
                ];

    var links = [
        { source: 0, target: 1 },
        { source: 0, target: 2 },
        { source: 0, target: 3 },
        { source: 0, target: 5 },
        { source: 4, target: 5 },
        { source: 4, target: 6 },
        { source: 4, target: 7 },
        { source: 4, target: 8 },
        { source: 0, target: 8 }
                ];

    var svg = d3.select('body').append('svg')
        .attr('width', width)
        .attr('height', height);

    var force = d3.layout.force()
        .size([width, height])
        .nodes(nodes)
        .links(links);

        force.linkDistance(width/2);

    var link = svg.selectAll('.link')
        .data(links)
        .enter().append('line')
        .attr('class', 'link');

    var node = svg.selectAll('.node')
        .data(nodes)
        .enter().append('circle')
        .attr('class', 'node');

    force.on('end', function() {

    node.attr('r', function(d) { return d.r; })
        .attr('cx', function(d) { return d.x; })
        .attr('cy', function(d) { return d.y; });

    link.attr('x1', function(d) { return d.source.x; })
        .attr('y1', function(d) { return d.source.y; })
        .attr('x2', function(d) { return d.target.x; })
        .attr('y2', function(d) { return d.target.y; });

});

    force.start();
    </script>
</body>
</html>
